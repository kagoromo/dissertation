\begin{proof}
  Suppose $\conf \parstepsto \conf'$ and $\conf \parstepsto \conf''$.
  The proof is by cases on the rule by which $\conf$ steps to
  $\conf'$.

  \begin{itemize}

  \item Case {\sc E-Beta}:

    Given: $\config{S}{\app{(\lam{x}{e})}{v}} \parstepsto
    \config{S}{\subst{e}{x}{v}}$, and
    $\config{S}{\app{(\lam{x}{e})}{v}} \parstepsto \conf''$.

    To show: There exists a $\pi$ such that
    $\config{S}{\subst{e}{x}{v}} = \pi(\conf'')$.

    By inspection of the operational semantics, the only reduction
    rule by which $\config{S}{\app{(\lam{x}{e})}{v}}$ can step is
    {\sc E-Beta}.  Hence $\conf'' = \config{S}{\subst{e}{x}{v}}$,
    and the case is satisfied by choosing $\pi$ to be the identity
    function.

  \item Case {\sc E-New}:

    Given: $\config{S}{\NEW} \parstepsto
    \config{\extS{S}{l}{\bot}{\frozenfalse}}{l}$, and
    $\config{S}{\NEW} \parstepsto \conf''$.

    To show: There exists a $\pi$ such that
    $\config{\extS{S}{l}{\bot}{\frozenfalse}}{l} = \pi(\conf'')$.

    By inspection of the operational semantics, the only reduction
    rule by which $\config{S}{\NEW}$ can step is {\sc E-New}.  Hence
    $\conf'' = \config{\extS{S}{l'}{\bot}{\frozenfalse}}{l'}$.  Since,
    by the side condition of {\sc E-New}, neither $l$ nor $l'$ occur
    in $\dom{S}$, the case is satisfied by choosing $\pi$ to be the
    permutation that maps $l'$ to $l$ and is the identity on every
    other element of $\Loc$.

  \item Case {\sc E-Put}:

    Given: $\config{S}{\putiexp{l}} \parstepsto
    \config{\extSRaw{S}{l}{u_{p_i}(p_1)}}{\unit}$, and
    $\config{S}{\putiexp{l}} \parstepsto \conf''$.

    To show: There exists a $\pi$ such that
    $\config{\extSRaw{S}{l}{u_{p_i}(p_1)}}{\unit} = \pi(\conf'')$.

    By inspection of the operational semantics, and since
    $u_{p_i}(p_1) \neq \topp$ (from the premise of {\sc E-Put}), the
    only reduction rule by which $\config{S}{\putiexp{l}}$ can step is
    {\sc E-Put}.  Hence $\conf'' =
    \config{\extSRaw{S}{l}{u_{p_i}(p_1)}}{\unit}$, and the case is
    satisfied by choosing $\pi$ to be the identity function.

  \item Case {\sc E-Put-Err}:

    Given: $\config{S}{\putiexp{l}} \parstepsto \error$, and
    $\config{S}{\putiexp{l}} \parstepsto \conf''$.

    To show: There exists a $\pi$ such that $\error = \pi(\conf'')$.
    By inspection of the operational semantics, and since
    $u_{p_i}(p_1) = \topp$ (from the premise of {\sc E-Put-Err}), the
    only reduction rule by which $\config{S}{\putiexp{l}}$ can step is
    {\sc E-Put-Err}.  Hence $\conf'' = \error$, and the case is
    satisfied by choosing $\pi$ to be the identity function.

  \item Case {\sc E-Get}:

    Given: $\config{S}{\getexp{l}{P}} \parstepsto \config{S}{p_2}$,
    and $\config{S}{\getexp{l}{P}} \parstepsto \conf''$.

    To show: There exists a $\pi$ such that $\config{S}{p_2} =
    \pi(\conf'')$.

    By inspection of the operational semantics, the only reduction
    rule by which $\config{S}{\getexp{l}{P}}$ can step is {\sc E-Get}.
    Hence $\conf'' = \config{S}{p_2}$, and the case is satisfied by
    choosing $\pi$ to be the identity function.

  \item Case {\sc E-Freeze-Init}:

    \TODO{.}

  \item Case {\sc E-Spawn-Handler}:

    \TODO{.}

  \item Case {\sc E-Freeze-Final}:

    \TODO{.}

  \item Case {\sc E-Freeze-Simple}:

    \TODO{.}

  \end{itemize}
\end{proof}

