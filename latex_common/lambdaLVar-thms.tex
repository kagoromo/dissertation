\newcommand{\LVarsLemMonotonicity}{
\begin{lem}[Monotonicity]\label{lem:lvars-monotonicity}
  If $\config{S}{e} \parstepsto \config{S'}{e'}$,
  then $\leqstore{S}{S'}$.
\end{lem}
}

\newcommand{\LVarsLemIndependence}{
\begin{lem}[Independence]\label{lem:lvars-independence}
  If $\config{S}{e} \parstepsto \config{S'}{e'}$ (where
  $\config{S'}{e'} \neq \textup{\error}$), then for all $S''$ such
  that $S''$ is non-conflicting with $\config{S}{e} \parstepsto
  \config{S'}{e'}$ and $\lubstore{S'}{S''} \neq \topS$:

  $\config{\lubstore{S}{S''}}{e} \parstepsto \config{\lubstore{S'}{S''}}{e'}$.
\end{lem}
}

\newcommand{\LVarsLemClash}{
\begin{lem}[Clash]\label{lem:lvars-clash}
  If $\config{S}{e} \parstepsto \config{S'}{e'}$ (where
  $\config{S'}{e'} \neq \textup{\error}$), then for all $S''$ such
  that $S''$ is non-conflicting with $\config{S}{e} \parstepsto
  \config{S'}{e'}$ and $\lubstore{S'}{S''} = \topS$:

  $\config{\lubstore{S}{S''}}{e} \parstepsto^i \textup{\error}$, where
  $i \leq 1$.
\end{lem}
}

\newcommand{\LemStorePartition}{
\begin{lem}[Store Partition]\label{lem:store-partition}
  Let $S$ and $S'$ be stores.  Then, for all $l_i$ such that $S(l_i)
  \mylt S'(l_i)$, there exists $S''$ such that
  $\eqstore{S'}{\extS{S''}{l_i}{S'(l_i)}}$ and $\myltstore{S''}{S'}$.
\end{lem}
}

\newcommand{\LVarsLemErrorPreservation}{
\begin{lem}[Error Preservation]\label{lem:lvars-error-preservation}
  If $\config{S}{e} \parstepsto \textup{\error}$ and $\leqstore{S}{S'}$, then
  $\config{S'}{e} \parstepsto \textup{\error}$.

\end{lem}
}

\newcommand{\LVarsLemDiamond}{
\begin{lem}[Diamond]\label{lem:lvars-diamond}
  If $\conf \parstepsto \conf_a$ and $\conf \parstepsto \conf_b$, then
  there exist $i$, $j$, and $\conf_c$ such that $\conf_a \parstepsto^i
  \conf_c$ and $\conf_b \parstepsto^j \conf_c$ and $i \leq 1$ and $j
  \leq 1$.
\end{lem}
}

\newcommand{\LVarsCorStrongLocalConfluence}{
\begin{cor}[Strong Local Confluence]\label{cor:lvars-strong-local-confluence}
  If $\conf \parstepsto \conf'$ and $\conf \parstepsto \conf''$,
  then there exist $\conf_c, i, j$ such that $\conf' \parstepsto^i
  \conf_c$ and $\conf'' \parstepsto^j \conf_c$ and $i \leq 1$ and
  $j \leq 1$.
\end{cor}
\begin{proof}
  Choose $i = j = 1$.  The proof follows immediately from
  Lemma~\ref{lem:lvars-diamond}.
\end{proof}
}

\newcommand{\LVarsLemStrongOneSidedConfluence}{
\begin{lem}[Strong One-Sided Confluence]\label{lem:lvars-strong-one-sided-confluence}
  If $\conf \parstepsto \conf'$ and $\conf \parstepsto^m \conf''$,
  where $1 \leq m$, then there exist $\conf_c, i, j$ such that
  $\conf' \parstepsto^i \conf_c$ and $\conf'' \parstepsto^j
  \conf_c$ and $i \leq m$ and $j \leq 1$.
\end{lem}
}

\newcommand{\LVarsLemStrongConfluence}{
\begin{lem}[Strong Confluence]\label{lem:lvars-strong-confluence}
  If $\conf \parstepsto^n \conf'$ and $\conf \parstepsto^m
  \conf''$, where $1 \leq n$ and $1 \leq m$, then there exist
  $\conf_c, i, j$ such that $\conf' \parstepsto^i \conf_c$ and
  $\conf'' \parstepsto^j \conf_c$ and $i \leq m$ and $j \leq n$.
\end{lem}
}

\newcommand{\LVarsLemConfluence}{
\begin{lem}[Confluence]\label{lem:lvars-confluence}
  If $\conf \parstepsto^* \conf'$ and $\conf \parstepsto^*
  \conf''$, then there exists $\conf_c$ such that $\conf'
  \parstepsto^* \conf_c$ and $\conf'' \parstepsto^* \conf_c$.
\end{lem}
\begin{proof}
  Strong Confluence (Lemma~\ref{lem:lvars-strong-confluence}) implies
  Confluence.
\end{proof}
}

\newcommand{\LVarsThmDeterminism}{
\begin{thm}[Determinism]\label{thm:lvars-determinism}
  If $\conf \parstepsto^* \conf'$ and $\conf \parstepsto^* \conf''$,
  and neither $\conf'$ nor $\conf''$ can take a step, then $\conf' =
  \conf''$ up to a permutation on configurations.
\end{thm}
\begin{proof}
  We have from Lemma~\ref{lem:lvars-confluence} that there exists
  $\conf_c$ such that $\conf' \parstepsto^* \conf_c$ and $\conf''
  \parstepsto^* \conf_c$.  Since neither $\conf'$ nor $\conf''$ can
  take a step, we must have $\conf' = \conf_c$ and $\conf'' =
  \conf_c$, hence $\conf' = \conf''$.
\end{proof}
}
